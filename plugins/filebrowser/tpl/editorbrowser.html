<?php

/**
 * @version $Id$
 */

?>
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Filebrowser</title>
        <?php echo tag('link rel="stylesheet" href="' . $pth['file']['corestyle'] . '" type="text/css"')?>
        <?php echo tag('link rel="stylesheet" href="' . $pth['folder']['plugin_css'] . 'stylesheet.css" type="text/css"')?>
        <style type="text/css">body {padding: 0; margin: 0; overflow: auto;}</style>

        %SCRIPT%

        <script type="text/javascript" src="<?php echo $pth['folder']['plugin']?>js/filebrowser.js"></script>
    </head>
    <body>
        <div id="xhFilebrowserMenu">
        %MESSAGE%
            <button type="button" onclick="FILEBROWSER.togglexhfbForm('xhfbCreateDir');"><?php echo $this->translate('create_folder'); ?></button>
            <button type="button" onclick="FILEBROWSER.togglexhfbForm('xhfbUploadFile');"><?php echo $this->translate('upload_file'); ?></button>
            <fieldset id="xhfbUploadFile" class="xhfbform">
                <legend><?php echo $this->translate('upload_file_to', $this->currentDirectory); ?></legend>
                <div style="padding: 3em;">

                    <form method="post" enctype="multipart/form-data" onsubmit="return FILEBROWSER.checkUpload(this, '<?php echo $this->escapeForEventHandlerAttribute($this->translate('confirm_upload'));?>')">
                        <?php echo tag('input type="file" name="fbupload"')?>
                        <?php echo tag('input type="hidden" name="upload" value="upload"')?>
			<?php echo $_XH_csrfProtection->tokenInput()?>
                        <?php echo tag('input type="submit" class="submit" value="' . $this->translate('upload_file') . '"')?>
                    </form>
                </div>
            </fieldset>
            <fieldset id="xhfbCreateDir" class="xhfbform">
                <legend><?php echo $this->translate('create_subfolder_in', $this->currentDirectory); ?></legend>
                <div style="padding: 3em;">

                    <form method="post">
                        <?php echo tag('input type="text" name="createFolder" size="30"')?>
			<?php echo $_XH_csrfProtection->tokenInput()?>
                        <?php echo tag('input type="submit" class="submit" value="' . $this->translate('create_folder') . '"')?>
                    </form>
                </div>
            </fieldset>
        </div>
        <div id="xhFilebrowser">
            <div id="filebrowser_folders">
                %FOLDERS%
            </div>
            <div id="filebrowser_files" style="overflow: auto; z-index: 3; font-weight: 300; padding: 6px 6px 100px 30px;">
			<span class="xhfb_files"><?php echo $this->translate('files');?></span><?php echo tag('br'), tag('br')?>
                %FILES%
            </div>
            <div style="clear:both;"></div>
        </div>
    </body>
</html>